<script type="text/javascript">
    RED.nodes.registerType('pkjq-zones', {
        category: 'SD SmartHouse',
        icon: "batch.png",
        color: "#80bfff",
        inputs: 1,
        outputs: 1,
        defaults: {
            name:               { value: "", required: true },

            zones:              { value: "", required: true },
        },

        label: function() {
            return this.name || "<unnamed>"
        },

        oneditprepare: function () {
            var that = this;
            this.editor = RED.editor.createEditor({
                id: 'node-input-zones-editor',
                mode: 'ace/mode/json',
                value: $("#node-input-zones").val()
            });
            this.editor.focus();
        },
        oneditsave: function () {
            $("#node-input-zones").val(this.editor.getValue());
            this.editor.destroy();
            delete this.editor;
        },
        oneditcancel: function () {
            this.editor.destroy();
            delete this.editor;
        },
        oneditresize: function (size) {
            this.resize();
            this.editor.resize();
        },
    });
</script>

<script type="text/x-red" data-template-name="pkjq-zones">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="name">
    </div>
    <br>

    <div class="form-row" style="margin-bottom: 0px;">
        <label for="node-input-zones" style="width: 100% !important;"><i class="fa fa-link"></i> Graph vertices and weights:</label>
        <input type="hidden" id="node-input-zones" autofocus="autofocus">
    </div>
    <div class="form-row node-text-editor-row">
        <div style="height:500px; min-height:250px;" class="node-text-editor" id="node-input-zones-editor"></div>
    </div>
</script>

<script type="text/x-red" data-help-name="pkjq-zones">
</script>
